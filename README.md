
# WAQL Tool

> [English Version (README.en.md)](docs/README.en.md)


<div align="center">

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Wwise WAQL (Wwise Authoring Query Language) å›¾å½¢åŒ–æŸ¥è¯¢å·¥å…·

[![Rust](https://img.shields.io/badge/rust-1.70%2B-orange.svg)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

</div>

## ğŸ“– ç®€ä»‹

WAQL Tool æ˜¯ä¸€ä¸ªä¸“ä¸º Audiokinetic Wwise è®¾è®¡çš„å›¾å½¢åŒ–æŸ¥è¯¢å·¥å…·ï¼Œé€šè¿‡ç›´è§‚çš„ç•Œé¢å¸®åŠ©éŸ³é¢‘è®¾è®¡å¸ˆå’Œæ¸¸æˆå¼€å‘è€…å¿«é€ŸæŸ¥è¯¢å’Œç®¡ç† Wwise é¡¹ç›®ä¸­çš„å¯¹è±¡ã€‚

## ğŸ“· æˆªå›¾

<div align="center">
  <img src="img/screen.png" alt="WAQL Tool æˆªå›¾" width="800">
</div>

### âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸ¨ **è¯­æ³•é«˜äº®** - æ”¯æŒ WAQL è¯­æ³•é«˜äº®æ˜¾ç¤ºï¼Œæå‡ä»£ç å¯è¯»æ€§
- ğŸ’¡ **æ™ºèƒ½è¡¥å…¨** - å†…ç½® WAAPI å±æ€§å’Œè®¿é—®å™¨çš„ä»£ç è‡ªåŠ¨è¡¥å…¨
- ğŸ“Š **ç»“æœå¯è§†åŒ–** - ä»¥è¡¨æ ¼å½¢å¼å±•ç¤ºæŸ¥è¯¢ç»“æœï¼Œæ¸…æ™°æ˜“è¯»
- ğŸ“ **CSV å¯¼å‡º** - ä¸€é”®å¯¼å‡ºæŸ¥è¯¢ç»“æœä¸º CSV æ–‡ä»¶
- ğŸ’¾ **æŸ¥è¯¢ä¿å­˜** - ä¿å­˜å¸¸ç”¨æŸ¥è¯¢è¯­å¥ï¼Œå¿«é€Ÿå¤ç”¨
- ğŸ¯ **è‡ªå®šä¹‰å…³é”®è¯** - æ·»åŠ é¡¹ç›®ç‰¹å®šçš„è‡ªå®šä¹‰å…³é”®è¯
- ğŸ¨ **å¤šä¸»é¢˜æ”¯æŒ** - å†…ç½®å¤šç§ä»£ç ç¼–è¾‘å™¨ä¸»é¢˜
- âš™ï¸ **é…ç½®æŒä¹…åŒ–** - è‡ªåŠ¨ä¿å­˜ç”¨æˆ·é…ç½®å’Œåå¥½è®¾ç½®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Wwise 2021 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆéœ€è¦å¯ç”¨ WAAPIï¼‰
- Windows æ“ä½œç³»ç»Ÿ

### å®‰è£…

#### æ–¹å¼ä¸€ï¼šä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼ˆæ¨èï¼‰

1. è®¿é—® [Releases é¡µé¢](https://github.com/xmimu/waql-tool/releases)
2. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ `waql-tool.exe`
3. åŒå‡»è¿è¡Œå³å¯ä½¿ç”¨

#### æ–¹å¼äºŒï¼šä»æºç ç¼–è¯‘

å¦‚æœæ‚¨éœ€è¦ä¿®æ”¹ä»£ç æˆ–æƒ³è¦æœ€æ–°çš„å¼€å‘ç‰ˆæœ¬ï¼š

1. **å‰ç½®è¦æ±‚**
   - Rust 1.70 æˆ–æ›´é«˜ç‰ˆæœ¬

2. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/xmimu/waql-tool.git
cd waql-tool
```

3. **æ„å»ºé¡¹ç›®**
```bash
# å¼€å‘æ„å»º
cargo build

# å‘å¸ƒæ„å»ºï¼ˆæ¨èï¼‰
cargo build --release
```

4. **è¿è¡Œåº”ç”¨**
```bash
# å¼€å‘æ¨¡å¼
cargo run

# å‘å¸ƒæ¨¡å¼
cargo run --release
```

ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶ä½äº `target/release/waql-tool.exe`

### é…ç½® Wwise

ç¡®ä¿ Wwise çš„ WAAPI åŠŸèƒ½å·²å¯ç”¨ï¼š

1. æ‰“å¼€ Wwise
2. è¿›å…¥ `Project` -> `User Preferences` -> `WAAPI`
3. å‹¾é€‰ `Enable WAAPI`
4. é‡å¯ Wwise

## ğŸ“š ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ç”¨æ³•

1. **ç¼–å†™æŸ¥è¯¢**
   - åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­è¾“å…¥ WAQL æŸ¥è¯¢è¯­å¥
   - ä½¿ç”¨ `Ctrl+Space` æˆ–è¾“å…¥æ—¶è‡ªåŠ¨è§¦å‘ä»£ç è¡¥å…¨
   - æŒ‰ `Enter` æˆ–ç‚¹å‡»"è¿è¡Œ"æŒ‰é’®æ‰§è¡ŒæŸ¥è¯¢

2. **æŸ¥çœ‹ç»“æœ**
   - æŸ¥è¯¢ç»“æœä¼šä»¥è¡¨æ ¼å½¢å¼æ˜¾ç¤ºåœ¨ä¸‹æ–¹
   - å¯ä»¥æ»šåŠ¨æŸ¥çœ‹æ‰€æœ‰åˆ—å’Œè¡Œ
   - æ˜¾ç¤ºæŸ¥è¯¢è¿”å›çš„å¯¹è±¡æ•°é‡

3. **å¯¼å‡ºæ•°æ®**
   - ç‚¹å‡»"å¯¼å‡º CSV"æŒ‰é’®
   - é€‰æ‹©ä¿å­˜ä½ç½®å’Œæ–‡ä»¶å
   - ç»“æœå°†ä¿å­˜ä¸º CSV æ ¼å¼

### WAQL æŸ¥è¯¢ç¤ºä¾‹

```waql
# æŸ¥æ‰¾æ‰€æœ‰éŸ³æ•ˆå¯¹è±¡
$ from type Sound

# æŸ¥æ‰¾ç‰¹å®šåç§°çš„å¯¹è±¡
$ from object "\\Actor-Mixer Hierarchy\\Default Work Unit\\MySound"

# ä½¿ç”¨ where å­å¥è¿‡æ»¤
$ from type Sound where name:"Footstep"

# æŸ¥æ‰¾å­å¯¹è±¡
$ from type ActorMixer select children
```

### æ”¯æŒåŒæ—¶æŒ‡å®š options è¿”å›é€‰é¡¹

```waql
# é€‰æ‹©ç‰¹å®šå±æ€§ åœ¨ | åˆ†å‰²ç¬¦ä¹‹å
$ from type ActorMixer | name @Volume
```

### é…ç½®é¢æ¿

ç‚¹å‡»"è®¾ç½®"æŒ‰é’®æ‰“å¼€é…ç½®é¢æ¿ï¼Œå¯ä»¥ï¼š

- ğŸ“ **ä¿å­˜çš„æŸ¥è¯¢** - ç®¡ç†å¸¸ç”¨æŸ¥è¯¢è¯­å¥
  - ç‚¹å‡»æŸ¥è¯¢å¿«é€ŸåŠ è½½åˆ°ç¼–è¾‘å™¨
  - åˆ é™¤ä¸å†éœ€è¦çš„æŸ¥è¯¢
  
- ğŸ”¤ **è‡ªå®šä¹‰å…³é”®è¯** - æ·»åŠ é¡¹ç›®ç‰¹å®šå…³é”®è¯
  - è¾“å…¥å…³é”®è¯å¹¶ç‚¹å‡»"æ·»åŠ "
  - å…³é”®è¯ä¼šå‡ºç°åœ¨ä»£ç è¡¥å…¨ä¸­
  
- ğŸ¨ **ç¼–è¾‘å™¨ä¸»é¢˜** - é€‰æ‹©ä»£ç ç¼–è¾‘å™¨é…è‰²æ–¹æ¡ˆ
  - GRUVBOXï¼ˆé»˜è®¤ï¼‰
  - GITHUB DARK
  - AURA
  - ç­‰å¤šç§ä¸»é¢˜
  
- ğŸ”¤ **å­—ä½“å¤§å°** - è°ƒæ•´ç¼–è¾‘å™¨å­—ä½“å¤§å°ï¼ˆ8-24ï¼‰

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
waql-tool/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs              # åº”ç”¨ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ lib.rs               # åº“å…¥å£
â”‚   â”œâ”€â”€ config.rs            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ query_executor.rs    # æŸ¥è¯¢æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ ui.rs                # UI æ¸²æŸ“
â”‚   â”œâ”€â”€ fonts/               # è‡ªå®šä¹‰å­—ä½“
â”‚   â”‚   â””â”€â”€ SIMKAI.TTF
â”‚   â””â”€â”€ waql/
â”‚       â”œâ”€â”€ mod.rs           # WAQL æ¨¡å—
â”‚       â”œâ”€â”€ properties.rs    # WAAPI å±æ€§å®šä¹‰
â”‚       â””â”€â”€ syntax.rs        # è¯­æ³•é«˜äº®å®šä¹‰
â”œâ”€â”€ py_helper/               # Python è¾…åŠ©å·¥å…·
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ pyproject.toml
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ Cargo.toml               # Rust é¡¹ç›®é…ç½®
â”œâ”€â”€ REFACTORING.md           # é‡æ„æ–‡æ¡£
â””â”€â”€ README.md                # æœ¬æ–‡ä»¶
```

### æ¨¡å—è¯´æ˜

- **config** - ç”¨æˆ·é…ç½®çš„åºåˆ—åŒ–ã€ååºåˆ—åŒ–å’ŒæŒä¹…åŒ–
- **query_executor** - WAQL æŸ¥è¯¢çš„æ‰§è¡Œã€ç»“æœè§£æå’Œæ•°æ®è½¬æ¢
- **ui** - æ‰€æœ‰ UI ç»„ä»¶çš„æ¸²æŸ“é€»è¾‘
- **waql** - WAQL è¯­æ³•å®šä¹‰ã€WAAPI å±æ€§å’Œè®¿é—®å™¨åˆ—è¡¨

## ğŸ”§ æŠ€æœ¯æ ˆ

- **[egui](https://github.com/emilk/egui)** - å³æ—¶æ¨¡å¼ GUI æ¡†æ¶
- **[eframe](https://github.com/emilk/egui/tree/master/crates/eframe)** - egui çš„åŸç”Ÿçª—å£åç«¯
- **[egui_code_editor](https://github.com/rylev/egui-code-editor)** - ä»£ç ç¼–è¾‘å™¨ç»„ä»¶
- **[waapi-rs](https://github.com/xmimu/waapi-rs)** - Wwise WAAPI Rust å®¢æˆ·ç«¯
- **[serde](https://serde.rs/)** - åºåˆ—åŒ–æ¡†æ¶
- **[rfd](https://github.com/PolyMeilex/rfd)** - åŸç”Ÿæ–‡ä»¶å¯¹è¯æ¡†

## ğŸ“ é…ç½®æ–‡ä»¶

ç”¨æˆ·é…ç½®ä¿å­˜åœ¨ï¼š
```
.\user_data.json
```

é…ç½®åŒ…å«ï¼š
- ä¿å­˜çš„æŸ¥è¯¢åˆ—è¡¨
- è‡ªå®šä¹‰å…³é”®è¯
- ç¼–è¾‘å™¨ä¸»é¢˜
- å­—ä½“å¤§å°

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ª Rust å®˜æ–¹ä»£ç é£æ ¼
- ä½¿ç”¨ `cargo fmt` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `cargo clippy` æ£€æŸ¥ä»£ç è´¨é‡
- ä¸ºå…¬å…± API æ·»åŠ æ–‡æ¡£æ³¨é‡Š

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [Audiokinetic](https://www.audiokinetic.com/) - æä¾›å¼ºå¤§çš„ Wwise éŸ³é¢‘ä¸­é—´ä»¶
- [egui](https://github.com/emilk/egui) - ä¼˜ç§€çš„ Rust GUI æ¡†æ¶
- æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·

## ğŸ“§ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: https://github.com/xmimu/waql-tool
- é—®é¢˜åé¦ˆ: https://github.com/xmimu/waql-tool/issues

---

<div align="center">
Made with â¤ï¸ by <a href="https://github.com/xmimu">xmimu</a>
</div>
